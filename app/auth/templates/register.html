{% extends "layout.html" %}

{% block title %}Register{% endblock %}

{% block head %}
<link href="{{ url_for('auth.static', filename='css/style.css') }}" rel="stylesheet">
{% endblock%}

{% block background %}
<img src="/static/image/bg.jpeg" alt="Background Image" class="position-fixed w-100 h-100" style="z-index: -1; object-fit: cover;">
{% endblock %}

{% block navbar %}
<div class="collapse navbar-collapse" id="navbarNav">
</div>
<div class="text-end">
    <a href="{{ url_for('auth.login') }}" class="btn btn-outline-success me-2">Login</button></a>
</div>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col register-card">
            <div class="card my-3">
                <div class="card-body">
                    <h3 class="card-title text-center text-success mb-3 mt-2">Join Today!</h3>
                    <form method="post" action="{{url_for('auth.register')}}" enctype="multipart/form-data">
                        <div class="row justify-content-around fw-bold">
                            <div class="form-group col-6">
                                <label for="username">Username</label>
                                <input type="text" class="form-control" name="username" id="username" required>
                            </div>
                            <div class="form-group col-6">
                                <label for="password">Password</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" name="password" id="password"
                                        title="Password must be at least 8 characters long and contain uppercase, lowercase, number and special characters."
                                        oninput="validate_password('password', 'password-tooltip')" required> 
                                    <div class="tooltip" id="password-tooltip">
                                        Password must be: <br />
                                        - at least 8 characters long <br />
                                        - contain uppercase, lowercase, number and special characters.
                                    </div>
                                    <div class="input-group-append">
                                        <i class="fa-regular fa-eye" aria-hidden="true" onclick="toggle_password_visibility('password')"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row justify-content-around fw-bold">
                            <div class="form-group col-4">
                                <label for="title">Title</label>
                                <select class="form-select" aria-label="Default select" name="title" id="title" required>
                                    <option selected disabled value="">Select</option>
                                    {% for title in titles %}
                                    <option value="{{ title }}">{{title}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form-group col-4">
                                <label for="first_name">First Name</label>
                                <input type="text" class="form-control" name="first_name" id="first_name" 
                                    title="Name must contain only alphabetic characters!" required>
                            </div>
                            <div class="form-group col-4">
                                <label for="last_name">Last Name</label>
                                <input type="text" class="form-control" name="last_name" id="last_name" 
                                    title="Name must contain only alphabetic characters!" required>
                            </div>
                        </div>
                        <div class="row justify-content-around fw-bold">
                            <div class="form-group col-4">
                                <label for="first_name">Position</label>
                                <input type="text" class="form-control" name="position" id="position" 
                                    title="Position must contain only alphabetic characters!" required>
                            </div>
                            <div class="form-group col-4">
                                <label for="phone">Phone</label>
                                <input type="tel" pattern="[0-9]{10}" class="form-control" name="phone" id="phone"
                                    title="Please enter a valid phone number. Example: 0271231234." required>
                            </div>
                            <div class="form-group col-4">
                                <label for="date_of_birth">Date of Birth</label>
                                <input type="date" class="form-control" name="date_of_birth" id="date_of_birth"
                                    onclick="max_date_today()" required>
                            </div>
                        </div>
                        <div class="row justify-content-around fw-bold">
                            <div class="form-group col-6">
                                <label for="email">Email</label>
                                <input type="email" class="form-control" name="email" id="email"
                                    title="Please enter a valid title." required>
                            </div>
                            <div class="form-group col-6">
                                <label for="address">Address</label>
                                <input type="text" class="form-control" name="address" id="address" required>
                            </div>
                        </div>
                        <div class="form-group mb-3 ">
                            <label class="fw-bold" for="health_info">Health Information (Optional)</label>
                            <textarea class="form-control" id="health_info" name="health_info" rows="2"></textarea>
                        </div>
                        <div class="form-group mb-3">
                            <label for="profile_image">Profile Image (Optional)</label>
                            <div id="dropArea" class="border rounded d-flex justify-content-center align-items-center"
                                style="height: 60px; cursor: pointer">
                                <div class="text-center">
                                    <i class="bi bi-cloud-arrow-up-fill text-primary" style="font-size: 30px"></i>
                                    <p class="mt-3 text-body-secondary">
                                        Drag and drop your image here or click to select a file.
                                    </p>
                                </div>
                            </div>
                            <input type="file" id="profile_image" name="profile_image" accept="image/*"
                                class="form-control d-none" />
                            <div id="gallery"></div>
                        </div>
                        <div class="text-center">
                            <button type="submit" class="btn btn-success btn-block">Sign Up</button>
                        </div>
                    </form>
                </div>
                <div class="card-footer text-center">
                    Already have an account? <a href="{{url_for('auth.login')}}"> Login Here </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script src="{{url_for('auth.static', filename='script/auth.js')}}"></script>
{% endblock %}
